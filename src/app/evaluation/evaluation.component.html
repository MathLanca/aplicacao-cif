<mat-horizontal-stepper class="main-stepper" linear="false" #stepper>
    <mat-step fxLayoutAlign="center" [stepControl]="firstFormGroup">
        <form [formGroup]="firstFormGroup">
            <ng-template matStepLabel>
                <span matTooltip="{{stepOne}}">{{stepOne}}</span>
            </ng-template>

            <h3 matTooltip="{{stepOne}}">{{stepOne}}</h3>

            <mat-card>
                <mat-form-field>
                    <mat-label>CPF do Paciente</mat-label>
                    <input matInput placeholder="Last name, First name" formControlName="firstCtrl" required>
                </mat-form-field>
                <mat-form-field>
                    <mat-label>Local da Avaliação</mat-label>
                    <input matInput placeholder="Last name, First name" formControlName="firstCtrl" required>
                </mat-form-field>
                <div>
                    <button mat-button matStepperNext>Next</button>
                </div>
            </mat-card>
        </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
            <ng-template matStepLabel>
                <span matTooltip="{{stepTwo}}">{{stepTwo}}</span>
            </ng-template>

            <h3 matTooltip="{{stepTwo}}">{{stepTwo}}</h3>

            <mat-accordion>
                <mat-expansion-panel #factorPanel *ngFor="let factor of environmentalFactors">
                    <mat-expansion-panel-header *ngIf="!factorPanel.expanded">
                        <mat-panel-title *ngIf="!factorPanel.expanded">
                            {{ factor.code}}
                        </mat-panel-title>
                        <mat-panel-description *ngIf="!factorPanel.expanded">
                            {{factor.title }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <p>{{ factor.code }} - <span class="inner-title">{{ factor.title }}</span></p>
                </mat-expansion-panel>
            </mat-accordion>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
            <ng-template matStepLabel>
                <span matTooltip="{{stepThree}}">{{stepThree}}</span>
            </ng-template>

            <h3 matTooltip="{{stepThree}}">{{stepThree}}</h3>

            <mat-accordion>
                <mat-expansion-panel #aNpPanel *ngFor="let aNp of activityAndParticipation">
                    <mat-expansion-panel-header *ngIf="!aNpPanel.expanded">
                        <mat-panel-title *ngIf="!aNpPanel.expanded">
                            {{ aNp.code}}
                        </mat-panel-title>
                        <mat-panel-description *ngIf="!aNpPanel.expanded">
                            {{aNp.title }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <p>{{ aNp.code }} - <span class="inner-title">{{ aNp.title }}</span></p>
                </mat-expansion-panel>
            </mat-accordion>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
            <ng-template matStepLabel>
                <span matTooltip="{{stepFour}}">{{stepFour}}</span>
            </ng-template>

            <h3 matTooltip="{{stepFour}}">{{stepFour}}</h3>

            <mat-accordion>
                <mat-expansion-panel #structurePanel *ngFor="let structure of bodyStructures">
                    <mat-expansion-panel-header *ngIf="!structurePanel.expanded">
                        <mat-panel-title *ngIf="!structurePanel.expanded">
                            {{ structure.code}}
                        </mat-panel-title>
                        <mat-panel-description *ngIf="!structurePanel.expanded">
                            {{structure.title }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <p>{{ structure.code }} - <span class="inner-title">{{ structure.title }}</span></p>
                </mat-expansion-panel>
            </mat-accordion>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
        <form [formGroup]="secondFormGroup">
            <ng-template matStepLabel>
                <span matTooltip="{{stepFive}}">{{stepFive}}</span>
            </ng-template>

            <h3 matTooltip="{{stepFive}}">{{stepFive}}</h3>

            <mat-accordion>
                <mat-expansion-panel #functionPanel *ngFor="let function of bodyFunctions">
                    <mat-expansion-panel-header *ngIf="!functionPanel.expanded">
                        <mat-panel-title *ngIf="!functionPanel.expanded">
                            {{ function.code }}
                        </mat-panel-title>
                        <mat-panel-description *ngIf="!functionPanel.expanded">
                            {{ function.title }}
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <p>{{ function.code }} - <span class="inner-title">{{ function.title }}</span></p>
                </mat-expansion-panel>
            </mat-accordion>
            <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
            </div>
        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Done</ng-template>
        <p>You are now done.</p>
        <div>
            <button mat-button matStepperPrevious>Back</button>
            <button mat-button (click)="stepper.reset()">Reset</button>
        </div>
    </mat-step>
</mat-horizontal-stepper>